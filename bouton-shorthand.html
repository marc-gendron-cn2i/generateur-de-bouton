<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Générateur de bouton Shorthand</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;700&family=Crimson+Pro:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root { --primary: #D51D2C; --bg-light: #eee; --border: #ccc; --white: #fff; }
    html, body { margin: 0; padding: 0; font-family: 'Red Hat Display', sans-serif; background: #f8f8f8; }
    body { max-width: 800px; margin: 2rem auto; padding: 1rem; }
    h1 { text-align: center; color: var(--primary); margin-bottom: 2rem; }
    label { display: block; font-weight: 700; margin-top: 1.5rem; }
    input, select, .editable { width: 100%; padding: 0.5rem; font-size: 1rem; border: 1px solid var(--border); border-radius: 6px; box-sizing: border-box; }
    input[type="checkbox"] { width: auto; }
    input[type="color"] { width: 2rem; height: 2rem; border: 1px solid var(--border); border-radius: 4px; cursor: pointer; padding: 0; }
    .editable { min-height: 3rem; position: relative; }
    .editable[placeholder]:empty:before { content: attr(placeholder); color: #888; position: absolute; top: 0.5rem; left: 0.5rem; }
    .format-buttons { margin-top: 0.5rem; }
    .format-buttons button { width: 2.5rem; height: 2.5rem; margin-right: 0.5rem; border: 1px solid var(--border); border-radius: 4px; background: var(--white); cursor: pointer; display: inline-flex; align-items: center; justify-content: center; }
    .color-row, .advanced-row { display: flex; gap: 1rem; }
    .color-input { flex: 1; display: flex; align-items: center; gap: 0.5rem; }
    #advancedOptionsToggle { display: block; margin: 1rem 0; background: none; color: var(--primary); border: none; text-decoration: underline; cursor: pointer; }
    #advancedOptions { display: none; background: var(--bg-light); padding: 1rem; border-radius: 6px; margin-bottom: 1rem; }
    .generate, .copy { margin-top: 1rem; padding: 0.75rem 1.5rem; background: var(--primary); color: var(--white); border: none; border-radius: 6px; cursor: pointer; font-family: inherit; }
    .generate:hover, .copy:hover { background: #a71a26; }
    iframe { width: 100%; border: 1px solid var(--border); border-radius: 6px; margin: 2rem 0; }
    textarea { width: 100%; height: 250px; font-family: monospace; margin-top: 1rem; }
    .warning { padding: 1rem; color: #b00; font-weight: 700; text-align: center; }
  </style>
</head>
<body>
  <h1>Générateur de bouton Shorthand</h1>
  <div>
    <label><input type="checkbox" id="withBackground"> Utiliser une image de fond</label>
    <label for="url">Lien URL du bouton</label>
    <input type="url" id="url" placeholder="https://...">
    <label>Texte du bouton</label>
    <div id="text" class="editable" contenteditable placeholder="Découvrir le reportage">Découvrir le reportage</div>
    <div class="format-buttons">
      <button data-cmd="bold"><b>G</b></button>
      <button data-cmd="italic"><i>I</i></button>
      <button data-cmd="underline"><u>S</u></button>
    </div>
    <div class="color-row">
      <div class="color-input">
        <label>Couleur du bouton</label>
        <input type="color" id="btnColorPicker" value="#D51D2C">
        <input type="text" id="btnColor" value="#D51D2C">
      </div>
      <div class="color-input">
        <label>Couleur du texte</label>
        <input type="color" id="textColorPicker" value="#ffffff">
        <input type="text" id="textColor" value="#ffffff">
      </div>
    </div>
    <div id="bgFields" style="display:none;">
      <label for="bgImage">Lien de l'image de fond</label>
      <input type="url" id="bgImage" placeholder="https://...">
      <label>Titre au-dessus du bouton</label>
      <div id="overlayTitle" class="editable" contenteditable placeholder="Titre du bloc (facultatif)"></div>
      <div class="format-buttons">
        <button data-cmd="bold" data-target="overlayTitle"><b>G</b></button>
        <button data-cmd="italic" data-target="overlayTitle"><i>I</i></button>
        <button data-cmd="underline" data-target="overlayTitle"><u>S</u></button>
      </div>
    </div>
    <button id="advancedOptionsToggle">Afficher les options avancées</button>
    <div id="advancedOptions">
      <label>Flou (%)</label><input type="number" id="blurPercent" value="0" min="0" max="100">
      <label>Hauteur du bloc</label><input type="text" id="blockHeight" value="250px">
      <label>Effet au survol du bouton</label>
      <div class="advanced-row">
        <label><input type="radio" name="hoverEffect" value="darken" checked> Foncer</label>
        <label><input type="radio" name="hoverEffect" value="lighten"> Éclaircir</label>
      </div>
      <div class="color-row">
        <div class="color-input"><label>Largeur du bouton</label><input type="text" id="buttonWidth" value="250px"></div>
        <div class="color-input"><label>Hauteur du bouton</label><input type="text" id="buttonHeight" value="55px"></div>
      </div>
      <label>Border-radius</label><input type="text" id="borderRadius" value="4px">
      <label>Taille texte bouton</label><input type="text" id="buttonFontSize" value="20px">
      <label>Taille titre</label><input type="text" id="titleFontSize" value="30px">
      <div class="color-row">
        <div class="color-input"><label>Police titre</label><select id="titleFontFamily"><option value="'Red Hat Display',sans-serif">Red Hat Display</option><option value="'Crimson Pro',serif">Crimson Pro</option></select></div>
        <div class="color-input"><label>Couleur titre</label><input type="color" id="titleColorPicker" value="#000000"><input type="text" id="titleColor" value="#000000"></div>
      </div>
      <label>Espacement titre-bouton</label><input type="text" id="titleSpacing" value="20px">
    </div>
    <button class="generate">Générer le code</button>
  </div>
  <label>Prévisualisation du bouton :</label>
  <iframe id="previewFrame" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
  <button class="copy">Copier le code</button>
  <label>Code HTML</label>
  <textarea id="codeOutput" readonly></textarea>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Synchronisation couleurs
      [['btnColorPicker','btnColor'],['textColorPicker','textColor'],['titleColorPicker','titleColor']].forEach(([cp,tf]) => {
        const c=document.getElementById(cp), t=document.getElementById(tf);
        c.addEventListener('input',()=>t.value=c.value);
        t.addEventListener('input',()=>c.value=t.value);
      });
      // Toggle fond
      document.getElementById('withBackground').addEventListener('change',function(){
        document.getElementById('bgFields').style.display=this.checked?'block':'none';
      });
      // Format
      document.querySelectorAll('.format-buttons button').forEach(btn=>{
        btn.addEventListener('click',function(){
          const tgt=this.dataset.target||'text';
          document.getElementById(tgt).focus();
          document.execCommand(this.dataset.cmd,false,null);
        });
      });
      // Options avancées
      document.getElementById('advancedOptionsToggle').addEventListener('click',function(){
        const p=document.getElementById('advancedOptions');
        const show=p.style.display!=='block';
        p.style.display=show?'block':'none';
        this.textContent=show?'Cacher les options avancées':'Afficher les options avancées';
      });
      // Génération
      document.querySelector('.generate').addEventListener('click',function(){
        const url=document.getElementById('url').value.trim();
        if(!url){document.getElementById('previewFrame').srcdoc='<div class="warning">⚠️ Entrer une URL.</div>';return;}
        const uid=Date.now();
        const v=id=>document.getElementById(id).value;
        const w=document.getElementById('withBackground').checked;
        const txt=document.getElementById('text').innerHTML;
        const btncol=v('btnColor'),txtcol=v('textColor'),bg=v('bgImage');
        const ttl=document.getElementById('overlayTitle').innerHTML;
        const ts=v('titleSpacing'),tfs=v('titleFontSize'),tff=v('titleFontFamily'),tcol=v('titleColor');
        const bl=v('blurPercent'),blockH=v('blockHeight');
        const btnW=v('buttonWidth');let btnH=v('buttonHeight');
        const br=v('borderRadius'),fs=v('buttonFontSize');
        const effect=document.querySelector('input[name="hoverEffect"]:checked').value;
        const hoverCss=effect==='darken'? 'filter: brightness(85%);' : 'filter: brightness(115%);';
        const minH=parseInt(fs)+(w?16:32);
        if(parseInt(btnH)<minH){btnH=minH+'px';document.getElementById('buttonHeight').value=btnH;}
        const titleHTML=ttl?`<div style="margin-bottom:${ts};font-size:${tfs};font-family:${tff};color:${tcol}">${ttl}</div>`:'';
        const blurCSS=w?`filter:blur(${bl}px);`:'';
        let html='';
        if(w){
          html=`<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
html,body{margin:0;padding:0;height:100%;overflow:hidden;}
@import url('https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;700&family=Crimson+Pro:wght@400;700&display=swap');
#wr${uid}{width:100%;height:${blockH};background-image:url('${bg}');background-repeat:no-repeat;background-position:center;background-size:cover;${blurCSS}display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 16px;box-sizing:border-box;}
#wr${uid} a{text-decoration:none;}
#btn${uid}{background-color:${btncol};color:${txtcol};padding:8px 35px;font-size:${fs};border:none;border-radius:${br};width:${btnW};height:${btnH};display:flex;justify-content:center;align-items:center;white-space:nowrap;cursor:pointer;transition: filter .4s;}
#btn${uid}:hover{${hoverCss}}
</style>
</head>
<body>
  <div id="wr${uid}">
    ${titleHTML}
    <a href="${url}" target="_blank"><button id="btn${uid}">${txt}</button></a>
  </div>
</body>
</html>`;
        } else {
          html=`<!DOCTYPE html>
<html>
<head>
<style>
html,body{margin:0;padding:0;height:100%;overflow:hidden;}
@import url('https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;700&display=swap');
body{display:flex;justify-content:center;align-items:center;font-family:'Red Hat Display',sans-serif;}
#btn${uid}{background-color:${btncol};color:${txtcol};padding:16px;font-size:${fs};border:none;border-radius:${br};width:${btnW};height:${btnH};display:flex;justify-content:center;align-items:center;white-space:nowrap;cursor:pointer;transition: filter .4s;}
#btn${uid}:hover{${hoverCss}}
</style>
</head>
<body>
  <button id="btn${uid}" onclick="window.open('${url}','_blank')">${txt}</button>
</body>
</html>`;
        }
        const frame=document.getElementById('previewFrame');frame.srcdoc=html;frame.style.height=blockH;
        document.getElementById('codeOutput').value=html;
      });
      document.querySelector('.copy').addEventListener('click',async()=>{const code=document.getElementById('codeOutput').value;try{await navigator.clipboard.writeText(code);}catch{document.getElementById('codeOutput').select();document.execCommand('copy');}alert('Code copié !');});
    });
  </script>
</body>
</html>
